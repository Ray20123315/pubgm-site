<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>測試隊友卡片顯示</title>
<style>
  body {
    font-family: "Microsoft JhengHei", "Helvetica Neue", sans-serif;
    margin: 0; padding: 0;
    background-color: #f6f6f6; color: #333;
  }
  .teammate-card {
    background-color: #fff;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    padding: 1em 1.2em;
    margin: 1em auto;
    max-width: 600px;
    transition: transform 0.2s;
  }
  .teammate-card:hover {
    transform: scale(1.02);
  }
  .teammate-card h3 {
    margin: 0 0 0.5em;
    font-size: 1.2em;
  }
  .teammate-card p {
    margin: 0.25em 0;
    line-height: 1.5;
    white-space: normal;
  }
  #teammate-list {
    text-align: center;
    font-size: 1.1em;
    color: #666;
  }
</style>
</head>
<body>

<div id="teammate-list">讀取中...</div>

<script>
  function clean(value) {
    if (!value) return "";
    return value.toString().trim().replace(/^"+|"+$/g, "").replace(/\r?\n/g, " ").replace(/\s+/g, " ");
  }

  function findKey(obj, keyword) {
    const keys = Object.keys(obj);
    for (let key of keys) {
      if (key.replace(/\s/g, '').includes(keyword.replace(/\s/g, ''))) {
        return key;
      }
    }
    return null;
  }

  function parseTimeText(str) {
    if (!str) return [];
    const raw = str.replace(/^"+|"+$/g, "").trim();
    if (!raw) return [];

    const allTimes = ["清晨", "上午", "中午", "下午", "晚上", "半夜"];
    let parts = raw.split(/[,、\s]+/).filter(p => p && p !== "，");
    const unique = [...new Set(parts)];

    if (unique.includes("不玩")) return ["不玩"];
    if (unique.includes("全天") || allTimes.every(t => unique.includes(t))) return ["全天"];
    return unique;
  }

  function displayTeammates(data) {
    const container = document.getElementById("teammate-list");
